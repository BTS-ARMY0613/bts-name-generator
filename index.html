<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>PTD On Stage Generator</title>
  <style>
    body { font-family: Helvetica, sans-serif; text-align: center; padding: 20px; background: #f5f5f5; }
    input { padding: 10px; font-size: 16px; margin: 5px; width: 300px; }
    button { padding: 10px 20px; font-size: 16px; margin-top: 10px; }
    canvas { margin-top: 20px; border: 1px solid #ccc; }
    a { display: block; margin-top: 15px; font-size: 18px; color: #3366cc; }
  </style>
</head>
<body>

  <h1>
    Ready to Press Play on <br><span style="white-space: nowrap;">PTD On Stage Live?</span>
  </h1>
  <p>Enter your name and country to get your concert-ready image ðŸ’œ</p>

  <input type="text" id="nameInput" placeholder="Enter your name" />
  <br>
  <input type="text" id="countryInput" placeholder="Enter your country" />
  <br>
  <button onclick="generateImage()">Generate</button>
  <br>
  <canvas id="nameCanvas" width="600" height="600"></canvas>
  <br>
  <a id="downloadLink" style="display:none;" download="bts_image.png">Download Your Image</a>

  <script>
    const images = ['images/bg1.jpg', 'images/bg2.jpg', 'images/bg3.jpg'];

    const sentences = [
      (name, country) => `Stage checked. Mic on. Heart not ready! ${name} in ${country} is ready to dive into BTS concert chaos again.`,
      (name, country) => `Concert fever is back and ${name} from ${country} will be front row, even from home.`,
      (name, country) => `Some memories donâ€™t fade. ${name} from ${country} will be pressing play on BTS magic again! âœ¨`,
      (name, country) => `${name} in ${country} is ready to feel every second, every song, every moment again. ðŸŽ¶`,
      (name, country) => `Itâ€™s not just a concert, itâ€™s history. And ${name} from ${country} is ready to witness it again!`,
      (name, country) => `ARMY everywhere will be tuning in, and that includes ${name} in ${country}, streaming from day one.`,
      (name, country) => `The album drop is near and ${name} in ${country} is ready to stream for BTS! ðŸ”¥`,
      (name, country) => `${name} in ${country} is ready to relive the music, the magic, the memories of all seven on stage together again!`,
      (name, country) => `BTS live on stage feels like coming home. ${name} from ${country} will be there, ðŸ’œ wide open.`
    ];

    function generateImage() {
      const name = document.getElementById('nameInput').value.trim();
      const country = document.getElementById('countryInput').value.trim();

      if (!name || !country) {
        alert("Please enter both your name and country.");
        return;
      }

      const canvas = document.getElementById('nameCanvas');
      const ctx = canvas.getContext('2d');

      const selectedImage = images[Math.floor(Math.random() * images.length)];
      const selectedSentence = sentences[Math.floor(Math.random() * sentences.length)](name, country);

      const image = new Image();
      image.onload = function () {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.drawImage(image, 0, 0, canvas.width, canvas.height);

        ctx.textAlign = "center";
        ctx.font = "32px Helvetica";

        let yPosition;
        let fontSize;

        if (selectedImage.includes("bg1")) {
          yPosition = canvas.height / 3 - 40;
          fontSize = 30;
          ctx.font = `bold ${fontSize}px Helvetica`;
          ctx.fillStyle = "white";
          ctx.strokeStyle = "black";
        } else if (selectedImage.includes("bg2")) {
          yPosition = canvas.height / 3;
          fontSize = 32;
          ctx.font = `bold ${fontSize}px Helvetica`;
          ctx.fillStyle = "black";
          ctx.strokeStyle = "white";
        } else {
          yPosition = canvas.height / 2 + 30;
          fontSize = 32;
          ctx.font = `${fontSize}px Helvetica`;  // not bold for bg3
          ctx.fillStyle = "white";
          ctx.strokeStyle = "white"; // no border
        }

        wrapText(ctx, selectedSentence, canvas.width / 2, yPosition, 500, fontSize + 6);

        const link = document.getElementById('downloadLink');
        link.href = canvas.toDataURL("image/png");
        link.style.display = "inline-block";
      };

      image.src = selectedImage;
    }

    function wrapText(ctx, text, x, y, maxWidth, lineHeight) {
      const words = text.split(' ');
      let line = '';
      for (let n = 0; n < words.length; n++) {
        const testLine = line + words[n] + ' ';
        const metrics = ctx.measureText(testLine);
        const testWidth = metrics.width;
        if (testWidth > maxWidth && n > 0) {
          ctx.strokeText(line, x, y);
          ctx.fillText(line, x, y);
          line = words[n] + ' ';
          y += lineHeight;
        } else {
          line = testLine;
        }
      }
      ctx.strokeText(line, x, y);
      ctx.fillText(line, x, y);
    }
  </script>

</body>
</html>
